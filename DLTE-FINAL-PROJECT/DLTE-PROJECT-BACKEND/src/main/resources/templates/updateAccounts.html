<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Title</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjIcsSv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">-->
<!--    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>-->
<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>-->
<!--    <style>-->
<!--        body {-->
<!--            background-size: cover;-->
<!--            background-attachment: fixed;-->
<!--        }-->
<!--   -->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<header th:insert="header :: head"></header>-->
<!--<div class="container">-->
<!--    <h1 style="color: aliceblue; position: center;">Close Account Service</h1>-->
<!--    <div class="row justify-content-center">-->
<!--        <div id="status" class="display-6 text-center text-primary"></div>-->
<!--        <div class="p-5 m-5 rounded-5 shadow">-->
<!--            <div class="form group">-->
<!--                <label>Account Id</label>-->
<!--                <input type="number" id="accountId" class="form-control" placeholder="Account id" readonly/>-->
<!--            </div>-->
<!--            <div class="form group">-->
<!--                <label>Account Number</label>-->
<!--                <input type="number" id="accountNumber" class="form-control" placeholder="Account Number" readonly/>-->
<!--            </div>-->
<!--            <div class="form group">-->
<!--                <label>Customer Id</label>-->
<!--                <input type="number" id="customerId" class="form-control" placeholder="Customer id" readonly/>-->
<!--            </div>-->
<!--            <div class="form group">-->
<!--                <label>Account Type</label>-->
<!--                <input type="text" id="accountType" class="form-control" placeholder="Account Type" readonly/>-->
<!--            </div>-->
<!--            <div class="form group">-->
<!--                <label>Account status</label>-->
<!--                <input type="text" id="accountStatus" class="form-control" placeholder="Account Status" readonly/>-->
<!--            </div>-->
<!--            <div class="form group">-->
<!--                <label>Account Balance</label>-->
<!--                <input type="number" id="accountBalance" class="form-control" placeholder="Account Balance" readonly/>-->
<!--            </div>-->
<!--            <div class="m-5 row justify-content-around">-->
<!--                <button id="add" class="col-1 btn btn-outline-primary"><p class="display-6 bi bi-cash-coin"></p></button>-->
<!--                <button id="cancel" class="col-1 btn btn-outline-primary"><p class="display-6 bi bi-escape"></p></button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--</body>-->
<!--<footer th:insert="footer :: foot"></footer>-->
<!--<script>-->
<!--    $(document).ready(() => {-->
<!--        const accountDetails = JSON.parse(sessionStorage.getItem("accountDetails"));-->
<!--        if (accountDetails) {-->
<!--            $("#accountId").val(accountDetails.accountId);-->
<!--            $("#accountNumber").val(accountDetails.accountNumber);-->
<!--            $("#customerId").val(accountDetails.customerId);-->
<!--            $("#accountType").val(accountDetails.accountType);-->
<!--            $("#accountStatus").val(accountDetails.accountStatus);-->
<!--            $("#accountBalance").val(accountDetails.accountBalance);-->
<!--        }-->
<!--        $("#cancel").click(() => {-->
<!--            $("#accountId").val("");-->
<!--            $("#accountNumber").val("");-->
<!--            $("#customerId").val("");-->
<!--            $("#accountType").val("");-->
<!--            $("#accountStatus").val("");-->
<!--            $("#accountBalance").val("");-->
<!--        });-->

<!--        $("#add").click(() => {-->
<!--            const accountId = $("#accountId").val();-->
<!--            const accountNumber = $("#accountNumber").val();-->
<!--            const customerId = $("#customerId").val();-->
<!--            const accountType = $("#accountType").val();-->
<!--            const accountStatus = $("#accountStatus").val();-->
<!--            const accountBalance = $("#accountBalance").val();-->

<!--            const request = {-->
<!--                "accountId": accountId,-->
<!--                "accountNumber": accountNumber,-->
<!--                "customerId": customerId,-->
<!--                "accountType": accountType,-->
<!--                "accountStatus": accountStatus,-->
<!--                "accountBalance": accountBalance-->
<!--            };-->

<!--            console.log(JSON.stringify(request));-->

<!--            $.ajax({-->
<!--                url: "http://localhost:8082/accounts/closeAccounts",-->
<!--                type: "PUT",-->
<!--                dataType: "text",-->
<!--                beforeSend: function (handler) {-->
<!--                    //handler.setRequestHeader("Authorization", "Basic " + btoa("rakesh:rakesh"));-->
<!--                    handler.setRequestHeader("Authorization","Basic "+sessionStorage.getItem("logged"))-->

<!--                },-->
<!--                contentType: "application/json;charset=utf-8",-->
<!--                data: JSON.stringify(request),-->
<!--                success: function (response) {-->

<!--                    $("#status").empty();-->

<!--                    // Append the response message to the status element-->
<!--                    $("#status").append("<h1>Response:</h1>");-->
<!--                    $("#status").append("<p>" + "Account Service Closed Successfuly" + "</p>");-->

<!--                },-->
<!--                error: function (xhr, status, error) {-->
<!--                    // Handle error response-->
<!--                    let errorMessage = xhr.responseText;-->
<!--                    alert("Error: " + errorMessage);-->
<!--                }-->
<!--            });-->
<!--        });-->
<!--    });-->
<!--</script>-->
<!--</html>-->


<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjIcsSv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
        <symbol id="check-circle-fill" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
        </symbol>
        <symbol id="exclamation-triangle-fill" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
        </symbol>
    </svg>

    <style>
        body {
            background-size: cover;
            background-attachment: fixed;
        }
        .custom-form {
            border: 2px solid #182052;
            color: #182052;
        }
        .custom-button3 {
            background-color: #182052 !important;
            color: white !important;
            border-radius: 20px !important;
            width: 100px !important;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>
<body>
<header th:insert="header :: head"></header>
<div class="container">
    <h1 style="color: aliceblue; text-align: center;">Close Account Service</h1>
    <div class="row justify-content-center">
        <div id="status" class="display-6 text-center text-primary"></div>
        <div class="p-5 m-5 rounded-5 shadow custom-form">
            <div class="form group">
                <label>Account Id</label>
                <input type="number" id="accountId" class="form-control" placeholder="***" readonly/>
            </div>
            <div class="form group">
                <label>Account Number</label>
                <input type="number" id="accountNumber" class="form-control" placeholder="Account Number" readonly/>
            </div>
            <div class="form group">
                <label>Customer Id</label>
                <input type="number" id="customerId" class="form-control" placeholder="***" readonly/>
            </div>
            <div class="form group">
                <label>Account Type</label>
                <input type="text" id="accountType" class="form-control" placeholder="Account Type" readonly/>
            </div>
            <div class="form group">
                <label>Account status</label>
                <input type="text" id="accountStatus" class="form-control" placeholder="Account Status" readonly/>
            </div>
            <div class="form group">
                <label>Account Balance</label>
                <input type="number" id="accountBalance" class="form-control" placeholder="Account Balance" readonly/>
            </div>
<!--            <div class="m-5 row justify-content-around">-->
<!--                <button id="add" class="col-1 btn custom-button3"><p class="display-6 bi bi-cash-coin"></p> Close Account</button>-->
<!--                <button id="cancel" class="col-1 btn  custom-button3" onclick="window.history.back();"><p class="display-6 bi bi-escape"></p> Cancel</button>-->
<!--            </div>-->
            <div class="row justify-content-center mt-3">
                <div class="col-md-4 mb-3">
                    <button id="add" class="btn custom-button3 w-100"><p class="display-6 bi bi-cash-coin"></p> Close Account</button>
                </div>
                <div class="col-md-4 mb-3">
                    <button id="cancel" class="btn custom-button3 w-100" onclick="window.history.back();"><p class="display-6 bi bi-escape"></p> Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<footer th:insert="footer :: foot"></footer>
<script>
    $(document).ready(() => {
        const urlParams = new URLSearchParams(window.location.search);
        const accountNumber = urlParams.get('accountNumber');
        const accountType = urlParams.get('accountType');
        const accountStatus = urlParams.get('accountStatus');
        const accountBalance = urlParams.get('accountBalance');

        $("#accountId").val("***");
        $("#accountNumber").val(accountNumber);
        $("#customerId").val("***");
        $("#accountType").val(accountType);
        $("#accountStatus").val(accountStatus);
        $("#accountBalance").val(accountBalance);

        $("#add").click(() => {
            const request = {
                "accountNumber": accountNumber,
                "accountType": accountType,
                "accountStatus": accountStatus,
                "accountBalance": accountBalance
            };

            $.ajax({
                url: "http://localhost:8082/accounts/closeAccounts",
                type: "PUT",
                dataType: "text",
                contentType: "application/json;charset=utf-8",
                data: JSON.stringify(request),
                success: function (response) {
                    $("#status").empty();
                    $("#status").append('<div class="alert alert-success d-flex align-items-center" role="alert"> <svg class="bi flex-shrink-0 me-2" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg> <div> Account Service Closed Successfully </div> </div>');
                },
                error: function (xhr, status, error) {
                    let errorMessage = xhr.responseText;
                    let errorCode = xhr.status;
                    window.location.href = "/customer/error/?message=" + encodeURIComponent(errorMessage) + "&code=" + encodeURIComponent(errorCode);
                }
            });
        });
    });
</script>




</html>
